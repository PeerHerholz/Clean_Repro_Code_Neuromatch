
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Continuous Integration &#8212; Code formatting &amp; testing</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/myfile.css?v=3437f865" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'materials/code_form_test_CI/CI_CD';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Course prerequisites" href="../../prerequisites.html" />
    <link rel="prev" title="Code testing" href="code_testing.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="https://impact-scholars.neuromatch.io/_static/Sciencematch.png" class="logo__image only-light" alt="Code formatting & testing - Home"/>
    <img src="https://impact-scholars.neuromatch.io/_static/Sciencematch.png" class="logo__image only-dark pst-js-only" alt="Code formatting & testing - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Welcome
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CoC.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dei.html">Diversity, Equity and Inclusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../setup.html">Setup</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="overview_code_form_test.html">Clean, tested and reproducible code</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="code_formatting.html">Code formatting, styling and linting</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_testing.html">Code testing</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Continuous Integration</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../prerequisites.html">Course prerequisites</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../prerequisites/intro_to_shell.html">Introduction to the (unix) command line: bash</a></li>












<li class="toctree-l2"><a class="reference internal" href="../prerequisites/intro_python.html">Introduction to Python</a></li>


</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/peerherholz/Clean_Repro_Code_Neuromatch" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/peerherholz/Clean_Repro_Code_Neuromatch/issues/new?title=Issue%20on%20page%20%2Fmaterials/code_form_test_CI/CI_CD.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/materials/code_form_test_CI/CI_CD.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Continuous Integration</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ci-on-github"><code class="docutils literal notranslate"><span class="pre">CI</span></code> on <code class="docutils literal notranslate"><span class="pre">GitHub</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#github-actions"><code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">actions</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#key-concepts-and-aspects">Key concepts and aspects</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-workflows">Building workflows</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#formatting-and-linting">Formatting and linting</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-the-computational-environment">Defining the computational environment</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#testing">Testing</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general-considerations">General considerations</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#computational-environments">Computational environments</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow-complexity">Workflow complexity</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion:</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="continuous-integration">
<h1>Continuous Integration<a class="headerlink" href="#continuous-integration" title="Link to this heading">#</a></h1>
<p>In the prior sessions, we explored and tried quite a few things, from <code class="docutils literal notranslate"><span class="pre">formatting</span></code> and <code class="docutils literal notranslate"><span class="pre">linting</span></code> to running various <code class="docutils literal notranslate"><span class="pre">tests</span></code>. As mentioned before, you should adhere to this principles and utilize the respective resources continuously and whenever you work on your <code class="docutils literal notranslate"><span class="pre">code</span></code>/<code class="docutils literal notranslate"><span class="pre">analyses</span></code>. However, this can of course become cumbersome with more complex <code class="docutils literal notranslate"><span class="pre">code</span></code>. So, ideally we could <code class="docutils literal notranslate"><span class="pre">automate</span></code> the <code class="docutils literal notranslate"><span class="pre">continuous</span></code> checks and quality control. But how?</p>
<p><code class="docutils literal notranslate"><span class="pre">Continuous</span> <span class="pre">integration</span></code> (<code class="docutils literal notranslate"><span class="pre">CI</span></code>), is basically that: run the <code class="docutils literal notranslate"><span class="pre">tests</span></code> you wrote previously automatically. In a wider sense, <code class="docutils literal notranslate"><span class="pre">CI</span></code> is the practice of integrating changes to a project made by individuals into a <code class="docutils literal notranslate"><span class="pre">main</span></code>, shared version frequently (usually multiple times per day). This is, because if you work collaboratively on <code class="docutils literal notranslate"><span class="pre">GitHub</span></code> (or <code class="docutils literal notranslate"><span class="pre">GitLab</span></code>) you probably work on your own <code class="docutils literal notranslate"><span class="pre">branch</span></code> or on a <code class="docutils literal notranslate"><span class="pre">feature</span> <span class="pre">branch</span></code> but eventually all work comes together in the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch. The <code class="docutils literal notranslate"><span class="pre">main</span></code> branch is also the <code class="docutils literal notranslate"><span class="pre">branch</span></code> on which the “software package” or <code class="docutils literal notranslate"><span class="pre">code</span></code>/<code class="docutils literal notranslate"><span class="pre">analyses</span></code> in the end will be built and/or distributed from. So it is very important that everything coming together to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch is <code class="docutils literal notranslate"><span class="pre">clean</span></code> and <code class="docutils literal notranslate"><span class="pre">tested</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">CI</span></code> software is also typically used to identify any <code class="docutils literal notranslate"><span class="pre">conflicts</span></code> and <code class="docutils literal notranslate"><span class="pre">bugs</span></code> that are introduced by changes, so they are found and fixed early, minimizing the effort required to do so. Running <code class="docutils literal notranslate"><span class="pre">CI</span></code> regularly also saves humans from needing to do it manually.</p>
<p><img alt="CI GitLab" src="../../_images/CI_GitLab.png" /></p>
<section id="ci-on-github">
<h2><code class="docutils literal notranslate"><span class="pre">CI</span></code> on <code class="docutils literal notranslate"><span class="pre">GitHub</span></code><a class="headerlink" href="#ci-on-github" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">GitHub</span></code> is only one provider of many which let’s you automate your <code class="docutils literal notranslate"><span class="pre">tests</span></code> whenever you <code class="docutils literal notranslate"><span class="pre">push</span></code> a new version to the <code class="docutils literal notranslate"><span class="pre">remote</span> <span class="pre">repository</span></code>. As <code class="docutils literal notranslate"><span class="pre">GitHub</span></code> is a collaborative <code class="docutils literal notranslate"><span class="pre">code</span></code> platform, it will do this for every <code class="docutils literal notranslate"><span class="pre">developer</span></code> when they push to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch by default (except if changed respectively). However, you can also use <code class="docutils literal notranslate"><span class="pre">CI</span></code> to test different <code class="docutils literal notranslate"><span class="pre">branches</span></code>.</p>
<section id="github-actions">
<h3><code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">actions</span></code><a class="headerlink" href="#github-actions" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">Actions</span></code> is a <code class="docutils literal notranslate"><span class="pre">continuous</span> <span class="pre">integration</span></code> and <code class="docutils literal notranslate"><span class="pre">continuous</span> <span class="pre">deployment</span></code> (<code class="docutils literal notranslate"><span class="pre">CI</span></code>/<code class="docutils literal notranslate"><span class="pre">CD</span></code>) service. It allows to automate <code class="docutils literal notranslate"><span class="pre">workflows</span></code> for <code class="docutils literal notranslate"><span class="pre">building</span></code>, <code class="docutils literal notranslate"><span class="pre">testing</span></code>, and <code class="docutils literal notranslate"><span class="pre">deploying</span> <span class="pre">code</span></code> directly from <code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">repositories</span></code>. With <code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">Actions</span></code>, you can create <code class="docutils literal notranslate"><span class="pre">workflows</span></code> that run <code class="docutils literal notranslate"><span class="pre">automatically</span></code> on <code class="docutils literal notranslate"><span class="pre">events</span></code> like <code class="docutils literal notranslate"><span class="pre">pushes</span></code>, <code class="docutils literal notranslate"><span class="pre">pull</span> <span class="pre">requests</span></code>, or scheduled times.</p>
<section id="key-concepts-and-aspects">
<h4>Key concepts and aspects<a class="headerlink" href="#key-concepts-and-aspects" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Workflow</span></code>: A <code class="docutils literal notranslate"><span class="pre">YAML</span></code> file that defines automated processes (like <code class="docutils literal notranslate"><span class="pre">CI</span></code>/<code class="docutils literal notranslate"><span class="pre">CD</span></code>) for your <code class="docutils literal notranslate"><span class="pre">project</span></code>. <code class="docutils literal notranslate"><span class="pre">Workflows</span></code> are stored in the <code class="docutils literal notranslate"><span class="pre">.github/workflows/</span></code> directory within your <code class="docutils literal notranslate"><span class="pre">repository</span></code>. Each <code class="docutils literal notranslate"><span class="pre">workflow</span></code> can have multiple <code class="docutils literal notranslate"><span class="pre">jobs</span></code> and <code class="docutils literal notranslate"><span class="pre">steps</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Job</span></code>: A set of steps that run on the same <code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">machine</span></code> (or <code class="docutils literal notranslate"><span class="pre">runner</span></code>). <code class="docutils literal notranslate"><span class="pre">Jobs</span></code> are executed in parallel by default but can also depend on each other. For example, a <code class="docutils literal notranslate"><span class="pre">CI</span> <span class="pre">workflow</span></code> might have separate <code class="docutils literal notranslate"><span class="pre">jobs</span></code> for <code class="docutils literal notranslate"><span class="pre">linting</span></code>, <code class="docutils literal notranslate"><span class="pre">testing</span></code>, and <code class="docutils literal notranslate"><span class="pre">deployment</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Step</span></code>: A single <code class="docutils literal notranslate"><span class="pre">task</span></code> within a <code class="docutils literal notranslate"><span class="pre">job</span></code>. Each <code class="docutils literal notranslate"><span class="pre">step</span></code> can <code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">commands</span></code>, <code class="docutils literal notranslate"><span class="pre">install</span> <span class="pre">dependencies</span></code>, <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">up</span> <span class="pre">environments</span></code>, or use <code class="docutils literal notranslate"><span class="pre">actions</span></code> (predefined reusable commands).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Runner</span></code>: A <code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">machine</span></code> hosted by <code class="docutils literal notranslate"><span class="pre">GitHub</span></code> (or self-hosted by you) that runs the <code class="docutils literal notranslate"><span class="pre">jobs</span></code>. <code class="docutils literal notranslate"><span class="pre">GitHub</span></code>-hosted <code class="docutils literal notranslate"><span class="pre">runners</span></code> come pre-configured with different <code class="docutils literal notranslate"><span class="pre">operating</span> <span class="pre">systems</span></code> and tools.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Events</span></code>: <code class="docutils literal notranslate"><span class="pre">Trigger</span> <span class="pre">points</span></code> that start a <code class="docutils literal notranslate"><span class="pre">workflow</span></code>. Common <code class="docutils literal notranslate"><span class="pre">events</span></code> include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">push</span></code>: Runs the <code class="docutils literal notranslate"><span class="pre">workflow</span></code> when <code class="docutils literal notranslate"><span class="pre">code</span></code> is <code class="docutils literal notranslate"><span class="pre">pushed</span></code> to a specified <code class="docutils literal notranslate"><span class="pre">branch</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pull_request</span></code>: Runs the <code class="docutils literal notranslate"><span class="pre">workflow</span></code> when a <code class="docutils literal notranslate"><span class="pre">pull</span> <span class="pre">request</span></code> is created or updated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">schedule</span></code>: Runs the <code class="docutils literal notranslate"><span class="pre">workflow</span></code> at specified <code class="docutils literal notranslate"><span class="pre">intervals</span></code>, like a cron job.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Actions</span></code>: Predefined or custom <code class="docutils literal notranslate"><span class="pre">scripts</span></code> that perform <code class="docutils literal notranslate"><span class="pre">tasks</span></code> within a <code class="docutils literal notranslate"><span class="pre">step</span></code>. <code class="docutils literal notranslate"><span class="pre">GitHub</span></code> provides many <code class="docutils literal notranslate"><span class="pre">actions</span></code> (like <code class="docutils literal notranslate"><span class="pre">checkout</span></code> for <code class="docutils literal notranslate"><span class="pre">cloning</span></code> the <code class="docutils literal notranslate"><span class="pre">repository</span></code>) that you can reuse in your <code class="docutils literal notranslate"><span class="pre">workflows</span></code>.</p></li>
</ol>
</section>
</section>
<section id="building-workflows">
<h3>Building workflows<a class="headerlink" href="#building-workflows" title="Link to this heading">#</a></h3>
<p>That all sounds a bit abstract, doesn’t it? So let’s see how these things work in action and create <code class="docutils literal notranslate"><span class="pre">workflows</span></code> for the things we did so far: <code class="docutils literal notranslate"><span class="pre">formatting</span></code> and <code class="docutils literal notranslate"><span class="pre">testing</span></code>.</p>
<p>Importantly, we will create and store these <code class="docutils literal notranslate"><span class="pre">workflows</span></code> in the <code class="docutils literal notranslate"><span class="pre">example</span> <span class="pre">repository</span></code> we created at the end of the <a class="reference external" href="https://peerherholz.github.io/Clean_Repro_Code_Neuromatch/materials/code_form_test_CI/code_formatting.html#summary-and-task-s">code formatting session</a>. Thus, please be aware of and pay attention to the paths.</p>
<p>At first, we need to create the above mentioned <code class="docutils literal notranslate"><span class="pre">directory</span></code> for our <code class="docutils literal notranslate"><span class="pre">workflows</span></code>. (NB: Please make sure to adapt the <code class="docutils literal notranslate"><span class="pre">path</span></code> to the <code class="docutils literal notranslate"><span class="pre">repository</span></code> based on your <code class="docutils literal notranslate"><span class="pre">machine</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s2">&quot;../../../../clean_reproducible_code_nm_example/.github/workflows&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>With the <code class="docutils literal notranslate"><span class="pre">directory</span></code> ready, we can start <code class="docutils literal notranslate"><span class="pre">building</span></code> our <code class="docutils literal notranslate"><span class="pre">workflows</span></code>.</p>
<section id="formatting-and-linting">
<h4>Formatting and linting<a class="headerlink" href="#formatting-and-linting" title="Link to this heading">#</a></h4>
<p>We will start with creating a workflow that automatically conducts the <code class="docutils literal notranslate"><span class="pre">formatting</span></code> and <code class="docutils literal notranslate"><span class="pre">linting</span></code> checks we conducted in the <a class="reference external" href="https://peerherholz.github.io/Clean_Repro_Code_Neuromatch/materials/code_form_test_CI/code_formatting.html">code formatting session</a>.</p>
<p>Specifically, we want to run <code class="docutils literal notranslate"><span class="pre">autopep8</span></code> to fix <code class="docutils literal notranslate"><span class="pre">formatting</span></code> problems and then use <code class="docutils literal notranslate"><span class="pre">flake8</span></code> to check for any problems.</p>
<p>Here’s how that <code class="docutils literal notranslate"><span class="pre">workflow</span> <span class="pre">file</span></code> would look like:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%writefile</span> ../../../../clean_reproducible_code_nm_example/.github/workflows/formatting.yml

<span class="c1"># The name of the workflow</span>
<span class="n">name</span><span class="p">:</span> <span class="n">CI</span> <span class="n">Formatting</span> 

<span class="c1"># The events/triggers when it should be run</span>
<span class="c1"># Here we set that the workflow should run</span>
<span class="c1"># whenever there was a push or PR to the </span>
<span class="c1"># main branch</span>
<span class="n">on</span><span class="p">:</span>
  <span class="n">push</span><span class="p">:</span>
    <span class="n">branches</span><span class="p">:</span> <span class="p">[</span><span class="n">main</span><span class="p">]</span>
  <span class="n">pull_request</span><span class="p">:</span>
    <span class="n">branches</span><span class="p">:</span> <span class="p">[</span><span class="n">main</span><span class="p">]</span>

<span class="c1"># We define the jobs that should be run</span>
<span class="c1"># and the respective runner, ie virtual machine</span>
<span class="c1"># Here, the workflow runs on the latest ubuntu</span>
<span class="n">jobs</span><span class="p">:</span>
  <span class="n">code</span><span class="o">-</span><span class="n">formatting</span><span class="o">-</span><span class="n">linting</span><span class="p">:</span>
    <span class="n">runs</span><span class="o">-</span><span class="n">on</span><span class="p">:</span> <span class="n">ubuntu</span><span class="o">-</span><span class="n">latest</span>

    <span class="c1"># Below we define all steps that should be</span>
    <span class="c1"># run within the workflow</span>
    <span class="n">steps</span><span class="p">:</span>
      <span class="c1"># Step 1: Checkout the repository</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Checkout</span> <span class="n">code</span>
        <span class="n">uses</span><span class="p">:</span> <span class="n">actions</span><span class="o">/</span><span class="n">checkout</span><span class="nd">@v2</span>

      <span class="c1"># Step 2: Set up Python environment</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">Python</span>
        <span class="n">uses</span><span class="p">:</span> <span class="n">actions</span><span class="o">/</span><span class="n">setup</span><span class="o">-</span><span class="n">python</span><span class="nd">@v2</span>
        <span class="k">with</span><span class="p">:</span>
          <span class="n">python</span><span class="o">-</span><span class="n">version</span><span class="p">:</span> <span class="s1">&#39;3.10.6&#39;</span>  <span class="c1"># Use the Python version compatible with your project</span>

      <span class="c1"># Step 3: Install dependencies</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Install</span> <span class="n">dependencies</span>
        <span class="n">run</span><span class="p">:</span> <span class="o">|</span>
          <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pip</span>
          <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>

      <span class="c1"># Step 4: Run autopep8 for code formatting</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Format</span> <span class="n">code</span> <span class="k">with</span> <span class="n">autopep8</span>
        <span class="n">run</span><span class="p">:</span> <span class="n">autopep8</span> <span class="o">--</span><span class="ow">in</span><span class="o">-</span><span class="n">place</span> <span class="o">--</span><span class="n">recursive</span> <span class="o">.</span>

      <span class="c1"># Step 5: Run linting with flake8</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Lint</span> <span class="n">code</span> <span class="k">with</span> <span class="n">flake8</span>
        <span class="n">run</span><span class="p">:</span> <span class="n">flake8</span> <span class="o">.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Overwriting ../../../../clean_reproducible_code_nm_example/.github/workflows/formatting.yml
</pre></div>
</div>
</div>
</div>
<p>While that’s already it for our <code class="docutils literal notranslate"><span class="pre">formatting</span></code> and <code class="docutils literal notranslate"><span class="pre">linting</span></code> <code class="docutils literal notranslate"><span class="pre">workflow</span></code> file, we need to address one thing before we can run it.</p>
<section id="defining-the-computational-environment">
<h5>Defining the computational environment<a class="headerlink" href="#defining-the-computational-environment" title="Link to this heading">#</a></h5>
<p>As mentioned before and as you can see above, we need to define a <code class="docutils literal notranslate"><span class="pre">computational</span> <span class="pre">environment</span></code> the <code class="docutils literal notranslate"><span class="pre">workflow</span></code> should <code class="docutils literal notranslate"><span class="pre">run</span></code> in and thus, the <code class="docutils literal notranslate"><span class="pre">code</span></code>/<code class="docutils literal notranslate"><span class="pre">analyses</span></code> should be <code class="docutils literal notranslate"><span class="pre">test</span></code>ed in. This should to some extent mimic your local setup but you should of course also think about some <code class="docutils literal notranslate"><span class="pre">parameterization</span></code>, ie using different <code class="docutils literal notranslate"><span class="pre">versions</span></code> of <code class="docutils literal notranslate"><span class="pre">python</span></code> and the respective <code class="docutils literal notranslate"><span class="pre">packages</span></code> you’re using.</p>
<p>That being said, we need to set the desired <code class="docutils literal notranslate"><span class="pre">python</span></code> <code class="docutils literal notranslate"><span class="pre">version</span></code>, as well as all <code class="docutils literal notranslate"><span class="pre">modules</span></code>/<code class="docutils literal notranslate"><span class="pre">packages</span></code> needed to run the <code class="docutils literal notranslate"><span class="pre">workflow</span></code>. To keep this simple, you should start with the <code class="docutils literal notranslate"><span class="pre">python</span></code> <code class="docutils literal notranslate"><span class="pre">version</span></code> you’re using locally for the <code class="docutils literal notranslate"><span class="pre">code</span></code>/<code class="docutils literal notranslate"><span class="pre">analyses</span></code> and utilize a little <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file within which you keep track of the required <code class="docutils literal notranslate"><span class="pre">modules</span></code>/<code class="docutils literal notranslate"><span class="pre">packages</span></code> and their specific <code class="docutils literal notranslate"><span class="pre">versions</span></code>.
While we already set the <code class="docutils literal notranslate"><span class="pre">python</span></code> <code class="docutils literal notranslate"><span class="pre">version</span></code> to <code class="docutils literal notranslate"><span class="pre">3.10.6</span></code>, the <code class="docutils literal notranslate"><span class="pre">version</span></code>, we used to create this workshop, you should always be aware of the <code class="docutils literal notranslate"><span class="pre">version</span></code> you’re using.</p>
<p>Regarding the <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>, we can create and populate it like so:
(NB: Please remember to change the <code class="docutils literal notranslate"><span class="pre">path</span></code> respectively.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%writefile</span> ../../../../clean_reproducible_code_nm_example/requirements.txt

<span class="n">flake8</span>
<span class="n">black</span>
<span class="n">autopep8</span>
<span class="n">numpy</span>
<span class="n">torch</span>
<span class="n">scikit</span><span class="o">-</span><span class="n">learn</span>
<span class="n">matplotlib</span>
<span class="n">seaborn</span>
<span class="n">pytest</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Writing ../../../../clean_reproducible_code_nm_example/requirements.txt
</pre></div>
</div>
</div>
</div>
<p>Now, we need to <code class="docutils literal notranslate"><span class="pre">add</span></code> both to our <code class="docutils literal notranslate"><span class="pre">repository</span></code>, <code class="docutils literal notranslate"><span class="pre">commit</span></code> the changes and <code class="docutils literal notranslate"><span class="pre">push</span></code> the files to <code class="docutils literal notranslate"><span class="pre">GitHub</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>add<span class="w"> </span>requirements.txt
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;add requirements.txt&quot;</span>
git<span class="w"> </span>add<span class="w"> </span>.github/workflows/formatting.yml
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;add formatting workflow&quot;</span>
git<span class="w"> </span>push
</pre></div>
</div>
<p>If everything worked out, you should see both files in your <code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">repository</span></code>.</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Clean_Repro_Code_Neuromatch/refs/heads/main/workshop/materials/static/CI_CD/workflow_added.png" alt="logo" title="jupyter" width="650" height="400" /> <p>Not only that: our <code class="docutils literal notranslate"><span class="pre">formatting</span> <span class="pre">workflow</span></code> actually already ran (as we <code class="docutils literal notranslate"><span class="pre">push</span></code>ed to the <code class="docutils literal notranslate"><span class="pre">main</span> <span class="pre">branch</span></code>, ie the <code class="docutils literal notranslate"><span class="pre">workflow</span> <span class="pre">trigger</span></code>). However, it failed as indicated by the small red x. While this can seem frightening and stressful, it’s actually very helpful, as we immediately know that we need to address some problems without having to evaluate things locally (you still should do that of course).</p>
<p>If you want to know what went wrong, ie what the problem is, you can click on the small little x and then on <code class="docutils literal notranslate"><span class="pre">details</span></code> to see what caused the issue.</p>
<p>What you will then see is a very comprehensive output log of all the things that happened when our <code class="docutils literal notranslate"><span class="pre">workflow</span></code> ran, ie all the <code class="docutils literal notranslate"><span class="pre">steps</span></code> and respective <code class="docutils literal notranslate"><span class="pre">commands</span></code>.</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Clean_Repro_Code_Neuromatch/refs/heads/main/workshop/materials/static/CI_CD/workflow_error_overview.png" alt="logo" title="jupyter" width="650" height="400" /> 
<p>Based on that, it’s clear that the <code class="docutils literal notranslate"><span class="pre">linting</span> <span class="pre">with</span> <span class="pre">flake8</span></code> <code class="docutils literal notranslate"><span class="pre">step</span></code> failed, ie parts of our <code class="docutils literal notranslate"><span class="pre">code</span></code> is not <code class="docutils literal notranslate"><span class="pre">formatted</span></code> correctly. By clicking on this <code class="docutils literal notranslate"><span class="pre">step</span></code>, we will get the respective outputs, similar to what we would we locally.</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Clean_Repro_Code_Neuromatch/refs/heads/main/workshop/materials/static/CI_CD/workflow_error_detail.png" alt="logo" title="jupyter" width="650" height="400" /> 
<p>While there are a lot of <code class="docutils literal notranslate"><span class="pre">errors</span></code>, the cool thing is that we see our previous work on <code class="docutils literal notranslate"><span class="pre">code</span> <span class="pre">formatting</span></code> in action: only new files, ie the ones we created and added after our <a class="reference external" href="https://peerherholz.github.io/Clean_Repro_Code_Neuromatch/materials/code_form_test_CI/code_formatting.html#summary-and-task-s">code formatting session</a> have <code class="docutils literal notranslate"><span class="pre">errors</span></code>, as we didn’t check their <code class="docutils literal notranslate"><span class="pre">formatting</span></code> until now via the the <code class="docutils literal notranslate"><span class="pre">automated</span> <span class="pre">workflow</span></code>.</p>
</section>
</section>
<section id="testing">
<h4>Testing<a class="headerlink" href="#testing" title="Link to this heading">#</a></h4>
<p>Comparably, we can set up a <code class="docutils literal notranslate"><span class="pre">workflow</span></code> to run the <code class="docutils literal notranslate"><span class="pre">test</span></code> whenever there’s a <code class="docutils literal notranslate"><span class="pre">push</span></code> and/or <code class="docutils literal notranslate"><span class="pre">PR</span></code> to the <code class="docutils literal notranslate"><span class="pre">main</span> <span class="pre">branch</span></code>.</p>
<p>At first, we need to create a respective file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%writefile</span> ../../../../clean_reproducible_code_nm_example/.github/workflows/testing.yml

<span class="c1"># The name of the workflow</span>
<span class="n">name</span><span class="p">:</span> <span class="n">CI</span> <span class="n">Testing</span> 

<span class="c1"># The events/triggers when it should be run</span>
<span class="c1"># Here we set that the workflow should run</span>
<span class="c1"># whenever there was a push or PR to the </span>
<span class="c1"># main branch</span>
<span class="n">on</span><span class="p">:</span>
  <span class="n">push</span><span class="p">:</span>
    <span class="n">branches</span><span class="p">:</span> <span class="p">[</span><span class="n">main</span><span class="p">]</span>
  <span class="n">pull_request</span><span class="p">:</span>
    <span class="n">branches</span><span class="p">:</span> <span class="p">[</span><span class="n">main</span><span class="p">]</span>

<span class="c1"># We define the jobs that should be run</span>
<span class="c1"># and the respective runner, ie virtual machine</span>
<span class="c1"># Here, the workflow runs on the latest ubuntu</span>
<span class="n">jobs</span><span class="p">:</span>
  <span class="n">code</span><span class="o">-</span><span class="n">testing</span><span class="p">:</span>
    <span class="n">runs</span><span class="o">-</span><span class="n">on</span><span class="p">:</span> <span class="n">ubuntu</span><span class="o">-</span><span class="n">latest</span>

    <span class="c1"># Below we define all steps that should be</span>
    <span class="c1"># run within the workflow</span>
    <span class="n">steps</span><span class="p">:</span>
      <span class="c1"># Step 1: Checkout the repository</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Checkout</span> <span class="n">code</span>
        <span class="n">uses</span><span class="p">:</span> <span class="n">actions</span><span class="o">/</span><span class="n">checkout</span><span class="nd">@v2</span>

      <span class="c1"># Step 2: Set up Python environment</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Set</span> <span class="n">up</span> <span class="n">Python</span>
        <span class="n">uses</span><span class="p">:</span> <span class="n">actions</span><span class="o">/</span><span class="n">setup</span><span class="o">-</span><span class="n">python</span><span class="nd">@v2</span>
        <span class="k">with</span><span class="p">:</span>
          <span class="n">python</span><span class="o">-</span><span class="n">version</span><span class="p">:</span> <span class="s1">&#39;3.10.6&#39;</span>  <span class="c1"># Use the Python version compatible with your project</span>

      <span class="c1"># Step 3: Install dependencies</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Install</span> <span class="n">dependencies</span>
        <span class="n">run</span><span class="p">:</span> <span class="o">|</span>
          <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pip</span>
          <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>

      <span class="c1"># Step 4: Run tests with pytest</span>
      <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Run</span> <span class="n">tests</span> <span class="k">with</span> <span class="n">pytest</span>
        <span class="n">run</span><span class="p">:</span> <span class="n">pytest</span> <span class="n">tests</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Overwriting ../../../../clean_reproducible_code_nm_example/.github/workflows/testing.yml
</pre></div>
</div>
</div>
</div>
<p>and copy our <code class="docutils literal notranslate"><span class="pre">pytest.init</span></code> file over (NB: Please remember to adapt the <code class="docutils literal notranslate"><span class="pre">paths</span></code> based on your <code class="docutils literal notranslate"><span class="pre">machine</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">pytest</span><span class="o">.</span><span class="n">ini</span> <span class="o">../../../../</span><span class="n">clean_reproducible_code_nm_example</span><span class="o">/</span>
</pre></div>
</div>
</div>
</div>
<p>Finally, we can <code class="docutils literal notranslate"><span class="pre">add</span></code>, <code class="docutils literal notranslate"><span class="pre">commit</span></code> and <code class="docutils literal notranslate"><span class="pre">push</span></code> everything:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>add<span class="w"> </span>pytest.ini
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;add pytest.ini&quot;</span>
git<span class="w"> </span>push
git<span class="w"> </span>add<span class="w"> </span>.github/workflows/formatting.yml
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;add testing workflow&quot;</span>
git<span class="w"> </span>push
</pre></div>
</div>
<p>That’s it, as the <code class="docutils literal notranslate"><span class="pre">computational</span> <span class="pre">environment</span></code> is the same as for the <code class="docutils literal notranslate"><span class="pre">formatting</span> <span class="pre">and</span> <span class="pre">linting</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">testing</span> <span class="pre">workflow</span></code> should now be in your <code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">repository</span></code> and already running.</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Clean_Repro_Code_Neuromatch/refs/heads/main/workshop/materials/static/CI_CD/multiple_workflows.png" alt="logo" title="jupyter" width="650" height="400" /> 
<p>In more detail, you should now see both <code class="docutils literal notranslate"><span class="pre">workflows</span></code> and their respective outcome, which makes it easy to navigate and address potential problems.</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Clean_Repro_Code_Neuromatch/refs/heads/main/workshop/materials/static/CI_CD/multiple_workflows_status.png" alt="logo" title="jupyter" width="650" height="400" /> 
<p>However, our <code class="docutils literal notranslate"><span class="pre">testing</span></code> <code class="docutils literal notranslate"><span class="pre">workflow</span></code> appears to pass and thus the <code class="docutils literal notranslate"><span class="pre">tests</span></code> verify the expected outcomes of our <code class="docutils literal notranslate"><span class="pre">code</span></code>/<code class="docutils literal notranslate"><span class="pre">analyses</span></code>.</p>
<img align="center" src="https://raw.githubusercontent.com/PeerHerholz/Clean_Repro_Code_Neuromatch/refs/heads/main/workshop/materials/static/CI_CD/test_workflow_status.png" alt="logo" title="jupyter" width="650" height="400" /> 
</section>
</section>
<section id="general-considerations">
<h3>General considerations<a class="headerlink" href="#general-considerations" title="Link to this heading">#</a></h3>
<p>There are two important things to consider when implementing <code class="docutils literal notranslate"><span class="pre">tests</span></code> and <code class="docutils literal notranslate"><span class="pre">workflows</span></code>, ie <code class="docutils literal notranslate"><span class="pre">CI</span></code> like this: <code class="docutils literal notranslate"><span class="pre">computational</span> <span class="pre">environments</span></code> and <code class="docutils literal notranslate"><span class="pre">workflow</span> <span class="pre">complexity</span></code>.</p>
<section id="computational-environments">
<h4>Computational environments<a class="headerlink" href="#computational-environments" title="Link to this heading">#</a></h4>
<p>While we used the same <code class="docutils literal notranslate"><span class="pre">computational</span> <span class="pre">environment</span></code> for writing the <code class="docutils literal notranslate"><span class="pre">code</span></code>/<code class="docutils literal notranslate"><span class="pre">analyses</span></code> and <code class="docutils literal notranslate"><span class="pre">testing</span></code>, it’s generally recommended to have separate <code class="docutils literal notranslate"><span class="pre">computational</span> <span class="pre">environments</span></code> for this to keep the <code class="docutils literal notranslate"><span class="pre">development</span></code> clean and straightforward, as e.g. not everything that’s required for <code class="docutils literal notranslate"><span class="pre">testing</span></code> is needed to run the <code class="docutils literal notranslate"><span class="pre">code</span></code>/<code class="docutils literal notranslate"><span class="pre">analyses</span></code>.</p>
</section>
<section id="workflow-complexity">
<h4>Workflow complexity<a class="headerlink" href="#workflow-complexity" title="Link to this heading">#</a></h4>
<p>Believe it or not: our example is somewhat simple as we have everything in one file and don’t have dependencies across files, etc. . Thus, implementing the respective <code class="docutils literal notranslate"><span class="pre">workflows</span></code> was rather “easy”. We could have put everything, ie the <code class="docutils literal notranslate"><span class="pre">formatting/linting</span></code> and <code class="docutils literal notranslate"><span class="pre">testing</span></code> in one longer <code class="docutils literal notranslate"><span class="pre">workflow</span></code> but we recommend to keep different <code class="docutils literal notranslate"><span class="pre">workflows</span></code> for different purposes. The specific implementation depends completely on your <code class="docutils literal notranslate"><span class="pre">code</span></code>/<code class="docutils literal notranslate"><span class="pre">analyses</span></code>/<code class="docutils literal notranslate"><span class="pre">project</span></code>.</p>
</section>
</section>
</section>
<section id="conclusion">
<h2>Conclusion:<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h2>
<div class="admonition-task-for-y-all admonition">
<p class="admonition-title">Task for y’all!</p>
<p>You have 40 min.</p>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./materials/code_form_test_CI"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="code_testing.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Code testing</p>
      </div>
    </a>
    <a class="right-next"
       href="../../prerequisites.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Course prerequisites</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ci-on-github"><code class="docutils literal notranslate"><span class="pre">CI</span></code> on <code class="docutils literal notranslate"><span class="pre">GitHub</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#github-actions"><code class="docutils literal notranslate"><span class="pre">GitHub</span> <span class="pre">actions</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#key-concepts-and-aspects">Key concepts and aspects</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-workflows">Building workflows</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#formatting-and-linting">Formatting and linting</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-the-computational-environment">Defining the computational environment</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#testing">Testing</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#general-considerations">General considerations</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#computational-environments">Computational environments</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow-complexity">Workflow complexity</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion:</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Neuromatch Impact Scholars team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024-.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>